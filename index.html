<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Green Gate - AI Port Entry</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js for dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- QRCode.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div id="app-container">
        <!-- Top navbar -->
        <header id="site-header" class="hidden">
            <div class="logo">
                <i data-lucide="leaf"></i>
                <h1>Smart Green Gate</h1>
            </div>
            <div class="user-info">
                <span id="current-user-role"></span>
                <button id="logout-btn" class="btn btn-icon btn-ghost"><i data-lucide="log-out"></i> Logout</button>
            </div>
        </header>

        <main id="main-content">
            <!-- Views will be injected here by app.js -->
        </main>
    </div>

    <!-- Templates -->
    <template id="view-login">
        <div class="login-container">
            <div class="login-card card">
                <div class="login-header">
                    <i data-lucide="leaf" class="text-green logo-icon"></i>
                    <h2>Welcome to Smart Green Gate</h2>
                    <p>Select your role to continue</p>
                </div>
                <div class="role-grid">
                    <button class="role-card" data-role="Admin">
                        <i data-lucide="shield"></i>
                        <span>Port Admin</span>
                    </button>
                    <button class="role-card" data-role="Operator">
                        <i data-lucide="truck"></i>
                        <span>Truck Operator</span>
                    </button>
                    <button class="role-card" data-role="Driver">
                        <i data-lucide="smartphone"></i>
                        <span>Truck Driver</span>
                    </button>
                </div>
            </div>
        </div>
    </template>

    <template id="view-admin">
        <div class="dashboard-layout">
            <div class="page-header">
                <h2>Admin Dashboard</h2>
                <div class="metrics-summary">
                    <div class="metric-card">
                        <span>Total Scheduled</span>
                        <h3 id="admin-total-scheduled">0</h3>
                    </div>
                    <div class="metric-card">
                        <span>Avg Turnaround Time</span>
                        <h3 id="admin-avg-time">0 min</h3>
                    </div>
                    <div class="metric-card highlight-green">
                        <span>COâ‚‚ Saved Today</span>
                        <h3 id="admin-co2-saved">0 kg</h3>
                    </div>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="card col-span-2">
                    <div class="card-header">
                        <h3>Gate Load Prediction</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="gateLoadChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Gate Status (Simulated)</h3>
                    </div>
                    <div class="card-body">
                        <div class="gate-status-monitor">
                            <div class="gate-lane available">Lane 1 (Open)</div>
                            <div class="gate-lane busy">Lane 2 (Processing)</div>
                            <div class="gate-lane available">Lane 3 (Open)</div>
                            <div class="gate-lane closed">Lane 4 (Closed)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="view-operator">
        <div class="operator-layout">
            <div class="page-header">
                <h2>Operator Portal</h2>
                <button class="btn btn-primary" id="btn-new-booking"><i data-lucide="plus"></i> Book New Slot</button>
            </div>
            <div class="dashboard-grid">
                <div class="card col-span-2">
                    <div class="card-header">
                        <h3>Upcoming Bookings</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Truck ID</th>
                                        <th>Slot Time</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="operator-bookings">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Smart Alerts</h3>
                    </div>
                    <div class="card-body alerts-container" id="operator-alerts">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Booking Modal -->
        <div id="modal-booking" class="modal hidden">
            <div class="modal-content card">
                <div class="modal-header">
                    <h3>Book Entry Slot</h3>
                    <button class="btn btn-icon btn-ghost close-modal"><i data-lucide="x"></i></button>
                </div>
                <div class="modal-body">
                    <form id="booking-form">
                        <div class="form-group">
                            <label>Truck License Plate</label>
                            <input type="text" id="input-truck-id" required placeholder="e.g. TRK-4921">
                        </div>
                        <div class="form-group">
                            <label>Arrival Date</label>
                            <input type="date" id="input-date" required>
                        </div>
                        <div class="form-group">
                            <label>Preferred Time</label>
                            <!-- AI suggests best time based on this -->
                            <select id="input-time" required>
                                <option value="">Select Time...</option>
                                <option value="08:00">08:00 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="14:00">02:00 PM</option>
                                <option value="16:00">04:00 PM</option>
                            </select>
                        </div>
                        <div id="ai-suggestion-box" class="ai-box hidden">
                            <!-- Populated by AI simulation -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Confirm Booking</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>

    <template id="view-driver">
        <div class="driver-layout">
            <div class="card compact-card text-center">
                <h3>Active Entry Pass</h3>
                <div class="qr-container" id="driver-qr"></div>
                <h2 id="driver-truck">TRK-0000</h2>
                <p id="driver-time" class="text-large text-green font-bold">Today, 10:00 AM</p>
                <div class="badge badge-success mt-sm">Approved</div>
            </div>
            
            <div class="card compact-card mt-md">
                <h3>Live Instructions</h3>
                <div class="alert alert-info">
                    <i data-lucide="info"></i>
                    <p>Proceed to Gate Lane 1. Current waiting time is minimal.</p>
                </div>
            </div>
        </div>
    </template>

    <!-- Scripts -->
    <script src="js/mockData.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
